{"version":3,"sources":["app.module.js","announcement/announcement.module.js","group/group.module.js","settings/settings.module.js","user/user.module.js","app.routes.js","gravatar.config.js","user/routeObserver.run.js","announcement/controller/detail.controller.js","group/controller/detail.controller.js","group/controller/list.controller.js","group/controller/members.controller.js","group/factory/group.factory.js","announcement/factory/announcement.factory.js","settings/controller/settings.controller.js","user/constant/auth.constant.js","user/constant/roles.constant.js","user/controller/login.controller.js","user/controller/register.controller.js","user/controller/welcome.controller.js","user/factory/auth.factory.js","user/factory/user.factory.js","user/service/userSession.service.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;ACJA;AACA;AACA;AACA;AACA;ACJA;AACA;AACA;AACA;AACA;ACJA;AACA;AACA;AACA;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.min.js","sourcesContent":["(function(){\n\n'use strict';\n\nangular.module('ws.app', ['ionic', 'ngCordova', 'LocalStorageModule', 'ui.gravatar', 'ws.group', 'ws.announcement', 'ws.user', 'ws.settings'])\n    .config([\"$ionicConfigProvider\", function($ionicConfigProvider) {\n      $ionicConfigProvider.platform.android.backButton.icon('ion-ios7-arrow-back');\n    }])\n    .run([\"$ionicPlatform\", \"$cordovaStatusbar\", function($ionicPlatform, $cordovaStatusbar) {\n          $ionicPlatform.ready(function() {\n            // Hide the accessory bar by default (remove this to show the accessory bar above the keyboard\n            // for form inputs)\n            if(window.cordova && window.cordova.plugins.Keyboard) {\n              cordova.plugins.Keyboard.hideKeyboardAccessoryBar(true);\n              cordova.plugins.Keyboard.disableScroll(true);\n            }\n            if(window.StatusBar) {\n              // org.apache.cordova.statusbar required\n              $cordovaStatusbar.styleColor('white');\n            }\n        });\n    }]);\n\n})();","(function(){\n    'use strict';\n\n    angular.module('ws.announcement', ['ionic', 'ws.user']);\n})();","(function() {\n    'use strict';\n\n    angular.module('ws.group', ['ionic', 'ws.announcement', 'ws.user']);\n})();","(function(){\n    'use strict';\n\n    angular.module('ws.settings', ['ionic', 'ui.gravatar', 'ws.user']);\n})();","(function(){\n    'use strict';\n    angular.module('ws.user', ['ionic', 'LocalStorageModule']);\n})();","(function(){\n    'use strict';\n\n    angular.module('ws.app')\n        .config([\"$stateProvider\", \"$urlRouterProvider\", \"USER_ROLES\", function($stateProvider, $urlRouterProvider, USER_ROLES) {\n            $stateProvider\n                .state('tabs', {\n                    url: '/tabs',\n                    abstract: true,\n                    templateUrl: 'templates/tabs.html',\n                    data: {\n                        authorizedRoles: [USER_ROLES.student, USER_ROLES.admin]\n                    }\n                })\n                .state('tabs.groups', {\n                    url: '/groups',\n                    views: {\n                        'tab-groups': {\n                            templateUrl: 'templates/group/list.html',\n                            controller: 'GroupListCtrl as ctrl'\n                        }\n                    }\n                    \n                })\n                .state('tabs.groups-announcement', {\n                    url: '/groups/:groupId/announcement/:announcementId',\n                    views: {\n                        'tab-groups': {\n                            templateUrl: 'templates/announcement/detail.html',\n                            controller: 'AnnouncementDetailCtrl as ctrl'\n                        }\n                    }\n                    \n                })\n                .state('tabs.groups-detail', {\n                    url: '/groups/:id',\n                    views: {\n                        'tab-groups': {\n                            templateUrl: 'templates/group/detail.html',\n                            controller: 'GroupDetailCtrl as ctrl'\n                        }\n                    }\n                    \n                })\n                .state('tabs.groups-members', {\n                    url: '/groups/:id/members',\n                    views: {\n                        'tab-groups': {\n                            templateUrl: 'templates/user/groupUsers.html',\n                            controller: 'GroupMembersCtrl as ctrl'\n                        }\n                    }\n                })\n                .state('tabs.contacts', {\n                    url: '/contacts',\n                    views: {\n                        'tab-contacts': {\n                            templateUrl: 'templates/user/list.html'\n                        }\n                    }\n                    \n                })\n                .state('tabs.settings', {\n                    url: '/settings',\n                    views: {\n                        'tab-settings': {\n                            templateUrl: 'templates/settings.html',\n                            controller: 'SettingsCtrl as ctrl'\n                        }\n                    }\n                })\n                .state('welcome', {\n                    url: '/welcome',\n                    templateUrl: 'templates/welcome.html',\n                    controller: 'WelcomeCtrl as ctrl'\n                })\n            ;\n            \n            $urlRouterProvider.otherwise( function($injector, $location) {\n                var $state = $injector.get(\"$state\");\n                $state.go(\"welcome\");\n            });\n        }]);\n})();","(function(){\n    'use strict';\n\n    angular.module('ws.app').config([\"gravatarServiceProvider\", function(gravatarServiceProvider){\n        gravatarServiceProvider.defaults = {\n          size     : 80,\n          default: 'mm'  // Mystery man as default for missing avatars\n        };\n\n        // Use https endpoint\n        gravatarServiceProvider.secure = true;\n\n        // Force protocol\n        gravatarServiceProvider.protocol = 'https';\n    }]);\n})();","(function(){\n    'use strict';\n    angular.module('ws.user')\n        .run([\"$rootScope\", \"$state\", \"Auth\", \"AUTH_EVENTS\", function ($rootScope, $state, Auth, AUTH_EVENTS) {\n            $rootScope.$on('$stateChangeStart', function (event, next) {\n                var authorizedRoles = (next.data && next.data.authorizedRoles) ? next.data.authorizedRoles : null;\n                if (authorizedRoles && !Auth.isAuthorized(authorizedRoles)) {\n                    event.preventDefault();\n                    if (!Auth.isAuthenticated()) {\n                        $state.go('welcome');\n                        return;\n                    }\n                }\n                if(next.name === 'welcome' && Auth.isAuthenticated()) {\n                    event.preventDefault();\n                    $state.go('tabs.groups');\n                    return;\n                } \n\n            });\n        }]);\n})();","(function(){\n    'use strict';\n\n    angular.module('ws.announcement')\n        .controller('AnnouncementDetailCtrl', [\"$stateParams\", \"$ionicScrollDelegate\", \"GroupService\", \"AnnouncementService\", \"UserSession\", function($stateParams, $ionicScrollDelegate, GroupService, AnnouncementService, UserSession){\n            var vm = this;\n            this.announcement = {};\n            this.group = {};\n\n            this.newComment = \"\";\n            var user = UserSession.getUser();\n\n            _reload();\n\n            function _reload() {\n                GroupService.getGroupById($stateParams.groupId).then(function(group){\n                    vm.group = group;\n                });\n                AnnouncementService.getAnnouncementById($stateParams.id).then(function(announcement){\n                    vm.announcement = announcement;\n                    $ionicScrollDelegate.scrollBottom();\n                });\n            }\n\n            this.isCurrentUserComment = function(comment) {\n                return comment.user.id === user.id;\n            }\n\n            this.sendNewComment = function() {\n                var comment = {user: user, content: this.newComment};\n                if(this.announcement.comments) {\n                    this.announcement.comments.push(comment);\n                    this.newComment = \"\";\n                }\n                $ionicScrollDelegate.scrollBottom();\n            }\n\n        }]);\n})();","(function(){\n    'use strict';\n\n    angular.module('ws.group')\n        .controller('GroupDetailCtrl', [\"$stateParams\", \"GroupService\", \"AnnouncementService\", \"UserService\", function($stateParams, GroupService, AnnouncementService, UserService){\n            var vm = this;\n            this.group = {};\n\n            this.members = [];\n\n            this.announcements = [];\n\n            this.getMemberNames = function() {\n                var members = [];\n                for(var i = 0; i < this.members.length; i += 1) {\n                    members.push(this.members[i].firstName + ' ' + this.members[i].lastName);\n                }\n                return members;\n            };\n\n            _reload();\n\n            function _reload() {\n                GroupService.getGroupById($stateParams.id).then(function(group){\n                    vm.group = group;\n                });\n                AnnouncementService.getAnnouncementsByGroupId($stateParams.id).then(function(announcements){\n                    vm.announcements = announcements;\n                });\n                UserService.getUsersByGroupId($stateParams.id).then(function(members){\n                    vm.members = members;\n                });\n            }\n\n        }]);\n})();","(function(){\n    'use strict';\n\n    angular.module('ws.group')\n        .controller('GroupListCtrl', [\"GroupService\", function(GroupService){\n            var vm = this;\n            this.groups = [];\n\n            _reload();\n\n            function _reload() {\n                GroupService.getGroups().then(function(groups){\n                    vm.groups = groups;\n                });\n            }\n        }])\n    ;\n})();","(function(){\n    'use strict';\n\n    angular.module('ws.group')\n        .controller('GroupMembersCtrl', [\"$stateParams\", \"GroupService\", \"UserService\", function($stateParams, GroupService, UserService){\n            var vm = this;\n            this.group = {};\n            this.memebrs = [];\n\n            _reload();\n\n            function _reload() {\n                GroupService.getGroupById($stateParams.id).then(function(group){\n                    vm.group = group;\n                });\n                UserService.getUsersByGroupId($stateParams.id).then(function(members){\n                    vm.members = members;\n                });\n            }\n        }]);\n})();","(function(){\n    'use strict';\n\n    angular.module('ws.group')\n        .factory('GroupService', [\"$q\", \"$timeout\", \"UserSession\", function($q, $timeout, UserSession){\n            return {\n                getGroups: getGroups,\n                getGroupById: getGroupById\n            };\n\n            var user = UserSession.user;\n\n            function getGroups() {\n                //TODO: Implement Real Api\n                var deferred = $q.defer();\n                $timeout(function(){\n                    var groups = [\n                        {\n                            id: 1,\n                            name: 'Group 1',\n                            owner: 'Owner'\n                        },\n                        {\n                            id: 1,\n                            name: 'Group 2',\n                            owner: 'Owner 2'\n                        }\n                    ];\n                    deferred.resolve(groups);\n                }, 1000);\n                return deferred.promise;\n            };\n\n            function getGroupById(id) {\n                //TODO: Implement Real Api\n                var deferred = $q.defer();\n                $timeout(function(){\n                    var group = {\n                        id: 1, \n                        name: 'Group 1', \n                        owner: 'Owner',\n                        announcements: [\n                            {\n                                id: 1,\n                                logo: 'ion-calendar',\n                                name: 'Announcement 1'\n                            },\n                            {\n                                id: 2,\n                                logo: 'ion-clock',\n                                name: 'Announcement 2'\n                            },\n                            {\n                                id: 3,\n                                logo: 'ion-coffee',\n                                name: 'Announcement 3'\n                            }\n                        ],\n                        members: [\n                            {name: 'John Doe'}, \n                            {name: 'Jane Doe'}, \n                            {name: 'John Doe'}, \n                            {name: 'John Doe'}, \n                            {name: 'John Doe'}, \n                            {name: 'John Doe'}, \n                            {name: 'John Doe'}, \n                            {name: 'John Doe'}\n                        ]\n                    };\n\n                    deferred.resolve(group);    \n                }, 1000);\n                return deferred.promise;\n            };\n        }])\n    ;\n})();","(function(){\n    'use strict';\n\n    angular.module('ws.announcement')\n        .factory('AnnouncementService', [\"$q\", \"$timeout\", \"UserSession\", function($q, $timeout, UserSession){\n            return {\n                getAnnouncementsByGroupId: getAnnouncementsByGroupId,\n                getAnnouncementById: getAnnouncementById\n            };\n\n            var user = UserSession.user;\n\n            function getAnnouncementsByGroupId(groupId) {\n                //TODO: Implement Real Api\n                var deferred = $q.defer();\n                $timeout(function(){\n                    var announcements = [\n                        {\n                            id: 1,\n                            logo: 'ion-calendar',\n                            name: 'Announcement 1'\n                        },\n                        {\n                            id: 2,\n                            logo: 'ion-clock',\n                            name: 'Announcement 2'\n                        },\n                        {\n                            id: 3,\n                            logo: 'ion-coffee',\n                            name: 'Announcement 3'\n                        }\n                    ];\n                    deferred.resolve(announcements);\n                }, 1000);\n                return deferred.promise;\n            };\n\n            function getAnnouncementById(id) {\n                //TODO: Implement Real Api\n                var deferred = $q.defer();\n                $timeout(function(){\n                    var announcement ={\n                        id: 1,\n                        groupId: 1,\n                        logo: 'ion-calendar',\n                        name: 'Announcement 1',\n                        description: 'Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industrys' + \n                        'standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make' +\n                        'a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining' +\n                        'essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum' +\n                        'passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.',\n                        comments: [\n                            {\n                                content: 'Cool',\n                                user: { id: 1, firstName: 'John', lastName: 'Doe'}\n                            },\n                            {\n                                content: 'Awesome!!!',\n                                user: { id: 1, firstName: 'John', lastName: 'Doe'}\n                            }, \n                            {\n                                content: 'Super',\n                                user: { id: 1, firstName: 'John', lastName: 'Doe'}\n                            },                        \n                            {\n                                content: 'Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industrys' + \n                        'standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make' +\n                        'a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining' +\n                        'essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum' +\n                        'passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.',\n                                user: { id: 1, firstName: 'John', lastName: 'Doe'}\n                            },\n                            {\n                                content: 'Shiiit!',\n                                user: { id: 4, firstName: 'Thomas', lastName: 'Hampe'}\n                            },     \n                        ]            \n                    };\n\n                    deferred.resolve(announcement);    \n                }, 1000);\n                return deferred.promise;\n            };\n        }]);\n})();","(function(){\n    'use strict';\n\n    angular.module('ws.settings')\n        .controller('SettingsCtrl', [\"$state\", \"Auth\", \"UserSession\", function($state, Auth, UserSession){\n            this.logout = function() {\n                Auth.logout();\n                $state.go('welcome');\n            };\n            this.user = UserSession.getUser();\n        }]);\n})();","(function(){\n    'use strict';\n    angular.module('ws.user')\n        .constant('AUTH_EVENTS', {\n            loginSuccess:           'auth-login-success',\n            loginFailed:            'auth-login-failed',\n            logoutSuccess:          'auth-logout-success',\n            sessionTimeout:         'auth-session-timeout',\n            notAuthenticated:       'auth-not-authenticated',\n            notAuthorized:          'auth-not-authorized'\n        });\n})();","(function(){\n    'use strict';\n\n    angular.module('ws.user')\n        .constant('USER_ROLES', {\n            all:        '*',\n            admin:      'admin',\n            teacher:    'teacher',\n            student:    'student',\n        });\n})();","(function(){\n    'use strict';\n    angular.module('ws.user')\n        .controller('LoginCtrl', [\"$rootScope\", \"$scope\", \"$ionicPopup\", \"AUTH_EVENTS\", \"Auth\", function LoginCtrl($rootScope, $scope, $ionicPopup, AUTH_EVENTS, Auth){\n            this.credentials = {\n                username: '',\n                password: ''\n            };\n            this.title = 'Login';\n            var self = this;\n            this.login = function(){\n                this.title = 'Please wait...';\n                Auth.login(this.credentials).then(function(user) {\n                    self.title = 'Login';\n                    self.credentials = {\n                        username: '',\n                        password: ''\n                    };\n                    if($scope.loginModal) {\n                        $scope.loginModal.hide();\n                    }\n                }, function (error) {\n                    self.title = 'Login';\n                    $ionicPopup.alert({\n                        title: 'Ooops :(',\n                        template: error.message || 'Please try again later...'\n                    });\n                });\n            };\n\n            this.cancel = function() {\n                if($scope.loginModal) {\n                    $scope.loginModal.hide();\n                }\n            };\n\n        }]);\n})();","(function(){\n    'use strict';\n    angular.module('ws.user')\n        .controller('RegisterCtrl', [\"$rootScope\", \"$scope\", \"$ionicPopup\", \"AUTH_EVENTS\", \"Auth\", function LoginCtrl($rootScope, $scope, $ionicPopup, AUTH_EVENTS, Auth){\n            this.credentials = {};\n            this.title = \"\";\n            var self = this;\n            this.register = function(){\n                this.title = 'Please wait...';\n                Auth.register(this.credentials).then(function(user) {\n                    _init();\n                    if($scope.registerModal) {\n                        $scope.registerModal.hide();\n                    }\n                }, function (error) {\n                    $ionicPopup.alert({\n                        title: 'Ooops :(',\n                        template: error.message || 'Please try again later...'\n                    });\n                });\n            };\n\n            this.cancel = function() {\n                if($scope.registerModal) {\n                    $scope.registerModal.hide();\n                }\n            };\n\n            function _init(){\n                self.credentials = {\n                    firstName: '',\n                    lastName: '',\n                    email: '',\n                    username: '',\n                    password: ''\n                };\n                self.title = 'Register';\n            };\n            _init();\n\n        }]);\n})();","(function(){\n    'use strict';\n\n    angular.module('ws.user')\n        .controller('WelcomeCtrl', [\"$scope\", \"$state\", \"$ionicModal\", \"Auth\", function($scope, $state, $ionicModal, Auth){\n            this.openLogin = function(){\n                $scope.loginModal.show();\n            };\n            this.openRegister = function(){\n                $scope.registerModal.show();\n            };\n            //Login\n            $ionicModal.fromTemplateUrl('templates/user/login.html', {\n                scope: $scope,\n                animation: 'slide-in-up'\n            }).then(function(modal) {\n                $scope.loginModal = modal;\n            });\n\n            //Register\n            $ionicModal.fromTemplateUrl('templates/user/register.html', {\n                scope: $scope,\n                animation: 'slide-in-up'\n            }).then(function(modal) {\n                $scope.registerModal = modal;\n            });\n\n            $scope.$on('$destroy', function() {\n                $scope.loginModal.remove();\n                $scope.registerModal.remove();\n            });\n\n\n\n            // Execute action on hide modal\n            $scope.$on('modal.hidden', function() {\n                if(Auth.isAuthenticated()) {\n                    $state.go('tabs.groups');\n                }\n            });\n            // Execute action on remove modal\n            $scope.$on('loginModal.removed', function() {\n            // Execute action\n            });\n\n        }]);\n})();","(function(){\n    'use strict';\n\n    angular.module('ws.user')\n        .factory('Auth', [\"$http\", \"$q\", \"$timeout\", \"$ionicHistory\", \"UserSession\", \"USER_ROLES\", function ($http, $q, $timeout, $ionicHistory, UserSession, USER_ROLES) {\n            var authService = {};\n\n            authService.login = function (credentials) {\n                //TODO: Implement Login Api\n                var deferred = $q.defer();\n\n                $timeout(function(){\n                    var user;\n                    if(credentials.username === 'thomas') {\n                        user = {\n                            id: 4,\n                            firstName: 'Thomas', \n                            lastName: 'Hampe',     \n                            username: 'thomas',\n                            email: 'thomas@hampe.co', \n                            role: USER_ROLES.student\n                        };\n                        UserSession.create(user);\n                        deferred.resolve(user);\n                    } else if(credentials.username === 'admin') {\n                        user = {\n                            id: 5,\n                            firstName: 'Administratore', \n                            lastName: 'Admin', \n                            username: 'admin',\n                            email: 'admin@hampe.co', \n                            role: USER_ROLES.admin\n                        };\n                        UserSession.create(user);\n                        deferred.resolve(user);\n                    } else {\n                        deferred.reject({ message: 'Username or Password invalid' });\n                    }\n                }, 300);\n\n                return deferred.promise;\n            };\n\n            authService.register = function(credentials) {\n                var deferred = $q.defer();\n                //TODO: Login API\n                return this.login(credentials);\n            }\n\n            authService.logout = function(){\n                //$ionicHistory.clearCache()\n                return UserSession.destroy();\n            };\n\n            authService.isAuthenticated = function () {\n                return !!UserSession.getUser().username;\n            };\n\n            authService.isAuthorized = function (authorizedRoles) {\n                if (!angular.isArray(authorizedRoles)) {\n                  authorizedRoles = [authorizedRoles];\n                }\n                return (authService.isAuthenticated() && authorizedRoles.indexOf(UserSession.getUser().role) !== -1);\n            };\n\n            return authService;\n        }]);\n})();","(function(){\n    'use strict';\n\n     angular.module('ws.group')\n        .factory('UserService', [\"$q\", \"$timeout\", \"UserSession\", \"USER_ROLES\", function($q, $timeout, UserSession, USER_ROLES){\n            return {\n                getUsers: getUsers,\n                getUsersByGroupId: getUsersByGroupId,\n                getUserById: getUserById\n            };\n\n            var user = UserSession.user;\n\n            function getUsers() {\n                //TODO: Implement Real Api\n                var deferred = $q.defer();\n                $timeout(function(){\n                    var users = [\n                        {\n                            firstName: 'Thomas', \n                            lastName: 'Hampe',     \n                            username: 'thomas',\n                            email: 'thomas@hampe.co', \n                            role: USER_ROLES.student\n                        },\n                        {\n                            firstName: 'Administratore', \n                            lastName: 'Admin', \n                            username: 'admin',\n                            email: 'admin@hampe.co', \n                            role: USER_ROLES.admin\n                        }\n                    ];\n                    deferred.resolve(users);\n                }, 1000);\n                return deferred.promise;\n            };\n\n            function getUsersByGroupId(groupId) {\n                //TODO: Implement Real Api\n                var deferred = $q.defer();\n                $timeout(function(){\n                    var users = [\n                        {\n                            firstName: 'Thomas', \n                            lastName: 'Hampe',     \n                            username: 'thomas',\n                            email: 'thomas@hampe.co', \n                            role: USER_ROLES.student\n                        },\n                        {\n                            firstName: 'Administratore', \n                            lastName: 'Admin', \n                            username: 'admin',\n                            email: 'admin@hampe.co', \n                            role: USER_ROLES.admin\n                        }\n                    ];\n                    deferred.resolve(users);\n                }, 1000);\n                return deferred.promise;\n            };\n\n            function getUserById(id) {\n                //TODO: Implement Real Api\n                var deferred = $q.defer();\n                $timeout(function(){\n                    var user = {\n                        firstName: 'Thomas', \n                        lastName: 'Hampe',     \n                        username: 'thomas',\n                        email: 'thomas@hampe.co', \n                        role: USER_ROLES.student\n                    };\n\n                    deferred.resolve(user);    \n                }, 1000);\n                return deferred.promise;\n            };\n        }]);\n})();","(function(){\n    'use strict';\n\n    angular.module('ws.user')\n        .service('UserSession', [\"localStorageService\", function(localStorageService){\n            var _userProps = ['firstName', 'lastName', 'email', 'username', 'role'];\n            var user;\n            this.getUser = function() {\n                if(user === undefined) {\n                    user = localStorageService.get('user') || {};\n                }\n                return user;\n            };\n\n            this.create = function (user) {\n                this.destroy();\n                localStorageService.set('user', user);\n                return this.getUser();\n            };\n            this.destroy = function () {\n                user = undefined;\n                localStorageService.set('user', {});\n            };\n            return this;\n        }]);\n})();"],"sourceRoot":"/source/"}